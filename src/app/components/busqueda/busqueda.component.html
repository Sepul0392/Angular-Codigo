<app-header></app-header>

<!--Contenedor Contenido Pagina-->
<div class="container py-3">

    <!-- Buscador -->
    <div class="container m-auto pb-2 bg-danger rounded-top">
        <h1 class="mt-5 py-4 text-center m ">Busqueda</h1>
    </div>
    <!--Contenedor busqueda-->
    <div class="container pt-1 bg-secondary rounded-bottom">

        <!--Opciones de Busqueda-->
        <div>
            <div class="contenedor py-3">
                <form>
                    <!--Tabs-->
                    <div class="row">
                        <div class="col">
                            <div class="card mt-3 tab-card border-0">
                                <div class="card-header tab-card-header">
                                    <!--Opcion Tab-->
                                    <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                                        <li class="nav-item col">
                                            <a class="nav-link text-center" id="one-tab" data-toggle="tab"
                                                href="#pregunta1" role="tab" aria-controls="pregunta1"
                                                aria-selected="true">Busqueda de Actividades</a>
                                        </li>
                                        <li class="nav-item col">
                                            <a class="nav-link text-center" id="two-tab" data-toggle="tab"
                                                href="#pregunta2" role="tab" aria-controls="pregunta2"
                                                aria-selected="false">Busqueda de Contenidos</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="tab-content" id="myTabContent">

                                    <!--Actividad Tab-->
                                    <div class="tab-pane fade show active bg-secondary p-3" id="pregunta1"
                                        role="tabpanel" aria-labelledby="one-tab">
                                        <div class="form-group">
                                            <h5 class="py-1 text-center text-white font-weight-bold">Actividades</h5>
                                            <!--Buscar Actividad-->
                                            <div>
                                                <div class="contenedor py-3">
                                                    <form #frmBuscarActividad="ngForm" (ngSubmit)="saveDataActividad(frmBuscarActvidad)">
                                                        <div class="form-group">
                                                            <!--Barra busqueda-->
                                                            <br>
                                                            <div class="form-inline">
                                                                <input type="text" class="form-control col-md-8" id="inputTextoBusquedaActividad"
                                                                    placeholder="Busqueda por nombre de la Actividad" [(ngModel)]="nombreActividadSelected" name="inputBusquedaActividad">
                                                            </div>
                                                        </div>
                                                        <label for="inputState" class="text-white">Filtros:</label>
                                                        <div class="form-row pb-3">
                                                            <!--Filtros-->
                                                            <div class="form-group col">
                                                                <label for="inputMateriaA" class="text-white">Materia</label>
                                                                <select [(ngModel)]="materiaSelectedA" id="inputMateriaA" name="materiaA" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let mater of materia" [value]="mater.id_materia">{{mater.nombre_materia}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group col">
                                                                <label for="inputGradoA" class="text-white">Grado</label>
                                                                <select [(ngModel)]="gradoSelectedA" id="inputGradoA" name="gradoA" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let grad of grado" [value]="grad.id_grado">{{grad.nombre_grado}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group col">
                                                                <label for="inputDocenteA" class="text-white">Profesor</label>
                                                                <select [(ngModel)]="docenteSelectedA" id="inputDocenteA" name="DocenteA" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let docen of docente" [value]="docen.id_docente">{{(docen.nombre_docente+" "+docen.apellido_docente)}}</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <!--Filtro Competencia-->
                                                        <div class="form-row pb-3">
                                                            <div class="form-group col">
                                                                <label for="inputDocenteA" class="text-white">Competencia</label>
                                                                <select [(ngModel)]="competenciaSelectedA" id="inputCompetenciaA" name="competenciaA" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let compe of competencia | filterCompetencia: nombreCompetenciaSelected:materiaSelectedA:gradoSelectedA" [value]="compe.id_competencia">{{(compe.nombre_competencia)}}
                                                                    </option>
                                                                </select>
                                                                <!--el valor seleccionado es {{competenciaSelectedA}}-->
                                                            </div>
                                                            <div class="form-group col">
                                                                <label for="inputDocenteA" class="text-white">Buscador Competencia</label>
                                                                <input type="text" class="form-control col-auto" id="inputTextoBusquedaCompetencia"
                                                                    placeholder="Ingrese nombre competencia" [(ngModel)]="nombreCompetenciaSelected" name="inputBusquedaCompetencia">
                                                            </div>
                                                        </div>
                                                        <!--Tabla de Resultados-->
                                                        <label for="inputState" class="text-white">Resultados:</label>
                                                        <div class="col container p-4 my bg-light rounded table-wrapper-scroll-y my-custom-scrollbar"
                                                            style="width: 95%; height: 450px">
                                                            <!--Resultado-->
                                                            <div class="row-1" *ngFor="let actividad of actividadVisualizar | filterActividad: nombreActividadSelected:materiaSelectedA:gradoSelectedA:docenteSelectedA:competenciaSelectedA">
                                                                <div class="card mb-4 border-0"
                                                                    style="max-width: 1440px;">
                                                                    <div class="card-footer p-2 bg-warning rounded-top">
                                                                        <h5 class="card-title">{{actividad.titulo_actividad}}</h5>
                                                                    </div>
                                                                    <div class="row no-gutters border border-top-0 border-secondary">
                                                                        <div class="col-md-10"
                                                                            style="max-width: 840px;">
                                                                            <div class="card-body p-2">
                                                                                <p class="card-text ">Descripcion: {{actividad.descripcion_actividad}}.</p>
                                                                                <p class="card-text"><small class="text-muted">Materia: {{actividad.materia}}</small></p>
                                                                                <p class="card-text"><small class="text-muted">Grado: {{actividad.id_grado}}</small></p>
                                                                                <p class="card-text"><small class="text-muted">Competencia: {{actividad.competencia}}</small></p>
                                                                                <p class="card-text"><small class="text-muted">Profesor: {{actividad.docente}}</small></p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="card-footer bg-secondary row justify-content-md-center no-gutters" data-toggle="modal"
                                                                        data-target="#mimodalejemplo"> 
                                                                        <a class="btn bg-warning" (click)="saveDataActivity(actividad)">Ver</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--Contenido Tab-->
                                    <div class="tab-pane fade bg-secondary p-3" id="pregunta2" role="tabpanel"
                                        aria-labelledby="two-tab">
                                        <div class="form-group">
                                            <h5 class="py-1 text-center text-white font-weight-bold">Contenidos</h5>
                                            <!--Buscar Contenido-->
                                            <div>
                                                <div class="contenedor py-3">
                                                    <form #frmBuscarContenido="ngForm" (ngSubmit)="saveDataContent(frmBuscarContenido)">
                                                        <div class="form-group">
                                                            <!--Barra busqueda-->
                                                            <br>
                                                            <div class="form-inline">
                                                                <input type="text" class="form-control col-md-8"
                                                                    id="inputTextoBusqueda"
                                                                    placeholder="Busqueda por nombre" [(ngModel)]="nombreCREASelected" name="inputBusquedaContenido">
                                                            </div>
                                                        </div>
                                                        <label for="inputState" class="text-white">Filtros:</label>
                                                        <div class="form-row pb-3">
                                                            <!--Filtros-->
                                                            <div class="form-group col">
                                                                <label for="inputMateria" class="text-white">Materia</label>
                                                                <select [(ngModel)]="materiaSelected" id="inputMateria" name="materia" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let mater of materia" [value]="mater.nombre_materia">{{mater.nombre_materia}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group col">
                                                                <label for="inputGrado" class="text-white">Grado</label>
                                                                <select [(ngModel)]="gradoSelected" id="inputGrado" name="grado" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let grad of grado" [value]="grad.id_grado">{{grad.nombre_grado}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group col">
                                                                <label for="inputGrado" class="text-white">Tipo de Contenido</label>
                                                                <select [(ngModel)]="tipoContenidoSelected" id="inputGrado" name="tipoContenido" class="form-control" ngModel required>
                                                                    <option selected></option>
                                                                    <option *ngFor="let tipCon of tipoContenido" [value]="tipCon.id_tipoContenido">{{tipCon.nombre_tipoContenido}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <!--Tabla de Resultados-->
                                                        <label for="inputState" class="text-white">Resultados:</label>
                                                        <div class="col container p-4 my bg-light rounded table-wrapper-scroll-y my-custom-scrollbar"
                                                            style="width: 95%; height: 450px">
                                                            <!--Resultado-->
                                                            <div class="row-1"
                                                                *ngFor="let contenidoREA of contenidoVisualizar | filterContent: nombreCREASelected:materiaSelected:gradoSelected:tipoContenidoSelected">
                                                                <div class="card mb-4 border-0" style="max-width: 1440px;">
                                                                    <div class="card-footer p-2 bg-primary rounded-top">
                                                                        <h5 class="card-title">{{contenidoREA.nombre_CREA}}</h5>
                                                                    </div>
                                                                    <div class="row no-gutters border border-top-0 border-secondary">
                                                                        <div class="col-md-10" style="max-width: 840px;">
                                                                            <div class="card-body p-2">
                                                                                <p class="card-text ">Descripcion: {{contenidoREA.descripcion_CREA}}.</p>
                                                                                <p class="card-text"><small class="text-muted">Materia: {{contenidoREA.materia}}</small></p>
                                                                                <p class="card-text"><small class="text-muted">Grado: {{contenidoREA.id_grado}}</small></p>
                                                                                <p class="card-text"><small class="text-muted">Tipo de contenido: {{contenidoREA.nombre_tipo_CREA}}</small></p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!--Boton ver Contenido-->
                                                                    <div class="card-footer bg-secondary row justify-content-md-center no-gutters" >
                                                                        <a class="btn btn-primary" (click)="verContenido(contenidoREA)">Ver</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <hr class="style3">
    </div>

    <!-- Modal -->
    <div class="modal fade" id="mimodalejemplo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">Confirmar Acci√≥n</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!--<iframe src="http://localhost:3000/repositorio/c.pdf" style="width:600px; height:500px;" frameborder="0"></iframe>-->
                </div>
                <div class="modal-footer justify-content-md-center no-gutters">
                    <button type="button" class="btn btn-default bg-warning font-weight-bold" data-dismiss="modal" (click)="deleteContenido()">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- /.container -->

<app-footer></app-footer>